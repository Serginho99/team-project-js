{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-33140f78c09524a6.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-19ff95e31ba092df.js","src/js/library.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","module.exports = require('./helpers/bundle-url').getBundleURL('jNRdE') + require('./helpers/bundle-manifest').resolve(\"7u6Ym\");","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"jNRdE\\\":\\\"library.d3b5de0c.js\\\",\\\"7u6Ym\\\":\\\"default-poster-webp.86f2548c.webp\\\",\\\"c4yW3\\\":\\\"library.007a9a96.js\\\"}\"));","import axios from 'axios';\n\nconst API_KEY = 'd7be37f171d8123214539749ff0838e8';\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst IMG_URL = 'https://image.tmdb.org/t/p/w500';\n\nconst watchedBtn = document.querySelector('.watched-btn');\nconst queueBtn = document.querySelector('.queue-btn');\nconst mainLib = document.querySelector('#main-library');\nconst libWrapper = document.querySelector('.library-wrapper')\n\nwatchedBtn.addEventListener('click', onWatchedBtnClick);\nqueueBtn.addEventListener('click', onQueueBtnClick);\n\nfunction onWatchedBtnClick() {\n   if (localStorage.getItem(\"watched\") === null) {\n      const emptyMarkUp = `<div class=\"container\">\n        <div class=\"library-wrapper\">\n          <p class=\"library-text\">\n            No watched films yet, let's look some\n          </p>\n          <a href=\"./index.html\" class=\"library-link link\">Choose film</a>\n        </div>\n      </div>`;\n      return mainLib.innerHTML = emptyMarkUp;\n   }\n   mainLib.innerHTML = '';\n  renderWatchedFilmsContainer();\n}\n\nfunction onQueueBtnClick() {\n  mainLib.innerHTML = '';\n  renderQueueFilmsContainer();\n}\n\nasync function getWatchedFilms() {\n   const getWatchedId = localStorage.getItem(\"watched\");\n   const parsedWatchedFilms = JSON.parse(getWatchedId);\n   const savedFilms = [];\n   for (let id in parsedWatchedFilms) {\n      const film = await fetchStorageFilm(id);\n      savedFilms.push(film);\n   }\n   return savedFilms;\n}\n\nasync function getQueueFilms() {\n   const getQueuedId = localStorage.getItem(\"queue\");\n   const parsedQueueFilms = JSON.parse(getQueuedId);\n   const savedFilms = [];\n   for (let id in parsedQueueFilms) {\n      const film = await fetchStorageFilm(id);\n      savedFilms.push(film);\n   }\n   return savedFilms;\n}\n\nasync function fetchStorageFilm(id) {\n  const response = await axios.get(\n    `${BASE_URL}/movie/${id}?api_key=${API_KEY}`\n  );\n  return response.data;\n}\n\nfunction generateLibraryContentList(array) {\n   return array.reduce(createLibraryMarkUp, '');\n}\n\nasync function renderWatchedFilmsContainer() {\n   const watchedFilms = await getWatchedFilms();\n   mainLib.insertAdjacentHTML('beforeend', generateLibraryContentList(watchedFilms));\n}\n\nasync function renderQueueFilmsContainer() {\n   const queueFilms = await getQueueFilms();\n   mainLib.insertAdjacentHTML('beforeend', generateLibraryContentList(queueFilms));\n}\n\nfunction createLibraryMarkUp(acc, cardFilm) {\n  const genreNames = cardFilm.genres.map(a => a.name);\n  return (\n    acc +\n    `<div class=\"movie\" data-id=\"${cardFilm.id}\">\n    <div class=\"wrapper-img\">\n    ${\n      cardFilm.poster_path\n        ? `<img src='${IMG_URL + cardFilm.poster_path}' alt='${\n            cardFilm.title\n          }' data-id=\"${cardFilm.id}\" >`\n        : `<img src=\"${require('/src/images/default-poster-webp.webp')}\" alt=\"${\n            cardFilm.title\n          }\" data-id=\"${cardFilm.id}\">`\n    }\n    </div>\n        <div class=\"movie-info\">\n          <h3 class=\"title__info\">${cardFilm.title}</h3>\n            <div class=\"overview\">\n            ${\n              genreNames.slice(0, 2).join(', ')\n                ? `<p class=\"info__genres-and-year\">${genreNames\n                    .slice(0, 2)\n                    .join(', ')} ${\n                    genreNames.length > 2 ? ', Other' : ' '\n                  } | ${cardFilm.release_date.slice(0, 4)} </p>`\n                : `<p class=\"info__genres-and-year\"> N/A | ${cardFilm.release_date.slice(\n                    0,\n                    4\n                  )} </p>`\n            }\n            <span class=\"vote_average\">${cardFilm.vote_average}</span> \n            </div>\n        </div>\n        </div>`\n  );\n}\n\nconst refs = {\n   watchedBtn: document.querySelector('.watched-btn'),\n   queueBtn: document.querySelector('.queue-btn')\n}\n\n\nrefs.watchedBtn.addEventListener('click', onWatchedBtn);\nrefs.queueBtn.addEventListener('click', onQueueBtn);\n\nfunction onWatchedBtn() {\n   if (!refs.watchedBtn.classList.contains('button-active')) {\n      refs.watchedBtn.classList.add('button-active');\n      refs.queueBtn.classList.remove('button-active');\n   }\n   return;\n}\n\nfunction onQueueBtn() {\n   if (!refs.queueBtn.classList.contains('button-active')) {\n      refs.queueBtn.classList.add('button-active');\n      refs.watchedBtn.classList.remove('button-active');\n   }\n   return;\n}\n\n\nif (localStorage.getItem(\"watched\") !== null) {\n   onWatchedBtnClick();\n   \n   // if (localStorage.getItem(\"queue\") !== null) {\n   //    onQueueBtnClick();\n   //    onQueueBtn();\n   // }\n}"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","module","exports","parcelRequire","getBundleURL","resolve","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","value","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","register","JSON","parse","$bpxeT","$93effc6fc56091ad$var$API_KEY","$93effc6fc56091ad$var$BASE_URL","$93effc6fc56091ad$var$watchedBtn","document","querySelector","$93effc6fc56091ad$var$queueBtn","$93effc6fc56091ad$var$mainLib","$93effc6fc56091ad$var$onWatchedBtnClick","localStorage","getItem","innerHTML","$93effc6fc56091ad$var$_renderWatchedFilmsContainer","apply","this","arguments","$93effc6fc56091ad$var$renderWatchedFilmsContainer","$93effc6fc56091ad$var$getWatchedFilms","$93effc6fc56091ad$var$_getWatchedFilms","$parcel$interopDefault","$2TvXO","mark","_callee","getWatchedId","parsedWatchedFilms","savedFilms","film","_ctx","t1","$93effc6fc56091ad$var$fetchStorageFilm","sent","push","$93effc6fc56091ad$var$getQueueFilms","$93effc6fc56091ad$var$_getQueueFilms","getQueuedId","parsedQueueFilms","$93effc6fc56091ad$var$_fetchStorageFilm","response","$dIxxU","get","concat","data","$93effc6fc56091ad$var$generateLibraryContentList","array","reduce","$93effc6fc56091ad$var$createLibraryMarkUp","watchedFilms","insertAdjacentHTML","$93effc6fc56091ad$var$_renderQueueFilmsContainer","queueFilms","acc","cardFilm","genreNames","genres","map","a","name","poster_path","title","slice","join","release_date","vote_average","addEventListener","$93effc6fc56091ad$var$renderQueueFilmsContainer","$93effc6fc56091ad$var$refs","watchedBtn","queueBtn","classList","contains","add","remove"],"version":3,"file":"library.d3b5de0c.js.map"}