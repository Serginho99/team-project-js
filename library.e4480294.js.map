{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-32d546c8b06f5caf.js","node_modules/@parcel/runtime-js/lib/runtime-00f040e76e28a100.js","src/js/library.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"2G1uI\")).toString();","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"bHX8u\\\":\\\"library.e4480294.js\\\",\\\"2G1uI\\\":\\\"default-poster-webp.86f2548c.webp\\\",\\\"7BX6O\\\":\\\"library.0beeb3b3.js\\\"}\"));","import axios from 'axios';\n\nconst API_KEY = 'd7be37f171d8123214539749ff0838e8';\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst IMG_URL = 'https://image.tmdb.org/t/p/w500';\n\nconst watchedBtn = document.querySelector('.watched-btn');\nconst queueBtn = document.querySelector('.queue-btn');\nconst mainLib = document.querySelector('#main-library');\nconst libWrapper = document.querySelector('.library-wrapper')\n\nwatchedBtn.addEventListener('click', onWatchedBtnClick);\nqueueBtn.addEventListener('click', onQueueBtnClick);\n\nfunction onWatchedBtnClick() {\n   if (localStorage.getItem(\"watched\") === null) {\n      const emptyMarkUp = `<div class=\"container\">\n        <div class=\"library-wrapper\">\n          <p class=\"library-text\">\n            No watched films yet, let's look some\n          </p>\n          <a href=\"./index.html\" class=\"library-link link\">Choose film</a>\n        </div>\n      </div>`;\n      return mainLib.innerHTML = emptyMarkUp;\n   }\n   mainLib.innerHTML = '';\n  renderWatchedFilmsContainer();\n}\n\nfunction onQueueBtnClick() {\n  mainLib.innerHTML = '';\n  renderQueueFilmsContainer();\n}\n\nasync function getWatchedFilms() {\n   const getWatchedId = localStorage.getItem(\"watched\");\n   const parsedWatchedFilms = JSON.parse(getWatchedId);\n   const savedFilms = [];\n   for (let id in parsedWatchedFilms) {\n      const film = await fetchStorageFilm(id);\n      savedFilms.push(film);\n   }\n   return savedFilms;\n}\n\nasync function getQueueFilms() {\n   const getQueuedId = localStorage.getItem(\"queue\");\n   const parsedQueueFilms = JSON.parse(getQueuedId);\n   const savedFilms = [];\n   for (let id in parsedQueueFilms) {\n      const film = await fetchStorageFilm(id);\n      savedFilms.push(film);\n   }\n   return savedFilms;\n}\n\nasync function fetchStorageFilm(id) {\n  const response = await axios.get(\n    `${BASE_URL}/movie/${id}?api_key=${API_KEY}`\n  );\n  return response.data;\n}\n\nfunction generateLibraryContentList(array) {\n   return array.reduce(createLibraryMarkUp, '');\n}\n\nasync function renderWatchedFilmsContainer() {\n   const watchedFilms = await getWatchedFilms();\n   mainLib.insertAdjacentHTML('beforeend', generateLibraryContentList(watchedFilms));\n}\n\nasync function renderQueueFilmsContainer() {\n   const queueFilms = await getQueueFilms();\n   mainLib.insertAdjacentHTML('beforeend', generateLibraryContentList(queueFilms));\n}\n\nfunction createLibraryMarkUp(acc, cardFilm) {\n  const genreNames = cardFilm.genres.map(a => a.name);\n  return (\n    acc +\n    `<div class=\"movie\" data-id=\"${cardFilm.id}\">\n    <div class=\"wrapper-img\">\n    ${\n      cardFilm.poster_path\n        ? `<img src='${IMG_URL + cardFilm.poster_path}' alt='${\n            cardFilm.title\n          }' data-id=\"${cardFilm.id}\" >`\n        : `<img src=\"${require('/src/images/default-poster-webp.webp')}\" alt=\"${\n            cardFilm.title\n          }\" data-id=\"${cardFilm.id}\">`\n    }\n    </div>\n        <div class=\"movie-info\">\n          <h3 class=\"title__info\">${cardFilm.title}</h3>\n            <div class=\"overview\">\n            ${\n              genreNames.slice(0, 2).join(', ')\n                ? `<p class=\"info__genres-and-year\">${genreNames\n                    .slice(0, 2)\n                    .join(', ')} ${\n                    genreNames.length > 2 ? ', Other' : ' '\n                  } | ${cardFilm.release_date.slice(0, 4)} </p>`\n                : `<p class=\"info__genres-and-year\"> N/A | ${cardFilm.release_date.slice(\n                    0,\n                    4\n                  )} </p>`\n            }\n            <span class=\"vote_average\">${cardFilm.vote_average}</span> \n            </div>\n        </div>\n        </div>`\n  );\n}\n\nconst refs = {\n   watchedBtn: document.querySelector('.watched-btn'),\n   queueBtn: document.querySelector('.queue-btn')\n}\n\n\nrefs.watchedBtn.addEventListener('click', onWatchedBtn);\nrefs.queueBtn.addEventListener('click', onQueueBtn);\n\nfunction onWatchedBtn() {\n   if (!refs.watchedBtn.classList.contains('button-active')) {\n      refs.watchedBtn.classList.add('button-active');\n      refs.queueBtn.classList.remove('button-active');\n   }\n   return;\n}\n\nfunction onQueueBtn() {\n   if (!refs.queueBtn.classList.contains('button-active')) {\n      refs.queueBtn.classList.add('button-active');\n      refs.watchedBtn.classList.remove('button-active');\n   }\n   return;\n}\n\n\nif (localStorage.getItem(\"watched\") !== null) {\n   onWatchedBtnClick();\n   \n   // if (localStorage.getItem(\"queue\") !== null) {\n   //    onQueueBtnClick();\n   //    onQueueBtn();\n   // }\n}"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","module","exports","URL","parcelRequire","resolve","import","meta","url","toString","register","JSON","parse","$2shzp","$1cafa503bc57b7a0$var$watchedBtn","document","querySelector","$1cafa503bc57b7a0$var$queueBtn","$1cafa503bc57b7a0$var$mainLib","$1cafa503bc57b7a0$var$onWatchedBtnClick","localStorage","getItem","emptyMarkUp","innerHTML","async","watchedFilms","getWatchedId","parsedWatchedFilms","savedFilms","film","$1cafa503bc57b7a0$var$fetchStorageFilm","push","$1cafa503bc57b7a0$var$getWatchedFilms","insertAdjacentHTML","$1cafa503bc57b7a0$var$generateLibraryContentList","$1cafa503bc57b7a0$var$renderWatchedFilmsContainer","$parcel$interopDefault","get","data","array","reduce","$1cafa503bc57b7a0$var$createLibraryMarkUp","acc","cardFilm","genreNames","genres","map","a","name","poster_path","title","slice","join","release_date","vote_average","addEventListener","queueFilms","getQueuedId","parsedQueueFilms","$1cafa503bc57b7a0$var$getQueueFilms","$1cafa503bc57b7a0$var$renderQueueFilmsContainer","$1cafa503bc57b7a0$var$refs","watchedBtn","queueBtn","classList","contains","add","remove"],"version":3,"file":"library.e4480294.js.map"}