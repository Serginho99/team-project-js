{"mappings":"kpBAsBA,IAAAA,EACAC,E,iJArBA,IAAIC,EAAU,GAoBdF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,G,EAelCL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,C,uCCnBTE,EAAAC,QAAiB,IAAAC,IAAoBC,EAAA,SAAAC,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,U,ICA5FL,EAAA,SAAAM,SAA8CC,KAAKC,MAAM,iKCAzD,IAAAC,EAAAT,EAAA,SAEA,MAIMU,EAAaC,SAASC,cAAc,gBACpCC,EAAWF,SAASC,cAAc,cAClCE,EAAUH,SAASC,cAAc,iBAqCvCG,eAAeC,EAAiBtB,GAI9B,aAHuBuB,EAAAR,GAAMS,IAC3B,sCAAqBxB,+CAEPyB,I,CAGlB,SAASC,EAA2BC,GACjC,OAAOA,EAAMC,OAAOC,EAAqB,G,CAa5C,SAASA,EAAoBC,EAAKC,GAChC,MAAMC,EAAaD,EAASE,OAAOC,KAAIC,GAAKA,EAAEC,OAC9C,OACEN,EACA,+BAA+BC,EAAS/B,4CAGtC+B,EAASM,YACL,aAtEM,kCAsEiBN,EAASM,qBAC9BN,EAASO,mBACGP,EAAS/B,QACvB,aAAaM,EAAA,kBACXyB,EAASO,mBACGP,EAAS/B,2FAIG+B,EAASO,+DAG/BN,EAAWO,MAAM,EAAG,GAAGC,KAAK,MACxB,oCAAoCR,EACjCO,MAAM,EAAG,GACTC,KAAK,SACNR,EAAWjC,OAAS,EAAI,UAAY,SAChCgC,EAASU,aAAaF,MAAM,EAAG,UACrC,2CAA2CR,EAASU,aAAaF,MAC/D,EACA,qDAGqBR,EAASW,0E,CAvFlD1B,EAAW2B,iBAAiB,SAG5B,WACEvB,EAAQwB,UAAY,GA0CtBvB,iBACG,MAAMwB,QAlCTxB,iBACG,MAAMyB,EAAeC,aAAaC,QAAQ,WACpCC,EAAqBpC,KAAKC,MAAMgC,GAChCI,EAAa,GACnB,IAAK,IAAIlD,KAAMiD,EAAoB,CAChC,MAAME,QAAa7B,EAAiBtB,GACpCkD,EAAWE,KAAKD,E,CAEnB,OAAOD,C,CA0BoBG,GAC3BjC,EAAQkC,mBAAmB,YAAa5B,EAA2BmB,G,CA3CpEU,E,IAJFpC,EAASwB,iBAAiB,SAO1B,WACEvB,EAAQwB,UAAY,GA0CtBvB,iBACG,MAAMmC,QA5BTnC,iBACG,MAAMoC,EAAcV,aAAaC,QAAQ,SACnCU,EAAmB7C,KAAKC,MAAM2C,GAC9BP,EAAa,GACnB,IAAK,IAAIlD,KAAM0D,EAAkB,CAC9B,MAAMP,QAAa7B,EAAiBtB,GACpCkD,EAAWE,KAAKD,E,CAEnB,OAAOD,C,CAoBkBS,GACzBvC,EAAQkC,mBAAmB,YAAa5B,EAA2B8B,G,CA3CpEI,E,IAoFF,MAAMC,EAAO,CACVC,WAAY7C,SAASC,cAAc,gBACnC6C,SAAU9C,SAASC,cAAc,eAIpC2C,EAAKC,WAAWnB,iBAAiB,SAGjC,WACQkB,EAAKC,WAAWE,UAAUC,SAAS,mBACrCJ,EAAKC,WAAWE,UAAUE,IAAI,iBAC9BL,EAAKE,SAASC,UAAUG,OAAO,kBAElC,M,IAPHN,EAAKE,SAASpB,iBAAiB,SAU/B,WACQkB,EAAKE,SAASC,UAAUC,SAAS,mBACnCJ,EAAKE,SAASC,UAAUE,IAAI,iBAC5BL,EAAKC,WAAWE,UAAUG,OAAO,kBAEpC,M","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-32d546c8b06f5caf.js","node_modules/@parcel/runtime-js/lib/runtime-00f040e76e28a100.js","src/js/library.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"2G1uI\")).toString();","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"bHX8u\\\":\\\"library.3f01cbd7.js\\\",\\\"2G1uI\\\":\\\"default-poster-webp.86f2548c.webp\\\",\\\"7BX6O\\\":\\\"library.0beeb3b3.js\\\"}\"));","import axios from 'axios';\n\nconst API_KEY = 'd7be37f171d8123214539749ff0838e8';\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst IMG_URL = 'https://image.tmdb.org/t/p/w500';\n\nconst watchedBtn = document.querySelector('.watched-btn');\nconst queueBtn = document.querySelector('.queue-btn');\nconst mainLib = document.querySelector('#main-library');\n\nwatchedBtn.addEventListener('click', onWatchedBtnClick);\nqueueBtn.addEventListener('click', onQueueBtnClick);\n\nfunction onWatchedBtnClick() {\n  mainLib.innerHTML = '';\n  renderWatchedFilmsContainer();\n}\n\nfunction onQueueBtnClick() {\n  mainLib.innerHTML = '';\n  renderQueueFilmsContainer();\n}\n\nasync function getWatchedFilms() {\n   const getWatchedId = localStorage.getItem(\"watched\");\n   const parsedWatchedFilms = JSON.parse(getWatchedId);\n   const savedFilms = [];\n   for (let id in parsedWatchedFilms) {\n      const film = await fetchStorageFilm(id);\n      savedFilms.push(film);\n   }\n   return savedFilms;\n}\n\nasync function getQueueFilms() {\n   const getQueuedId = localStorage.getItem(\"queue\");\n   const parsedQueueFilms = JSON.parse(getQueuedId);\n   const savedFilms = [];\n   for (let id in parsedQueueFilms) {\n      const film = await fetchStorageFilm(id);\n      savedFilms.push(film);\n   }\n   return savedFilms;\n}\n\nasync function fetchStorageFilm(id) {\n  const response = await axios.get(\n    `${BASE_URL}/movie/${id}?api_key=${API_KEY}`\n  );\n  return response.data;\n}\n\nfunction generateLibraryContentList(array) {\n   return array.reduce(createLibraryMarkUp, '');\n}\n\nasync function renderWatchedFilmsContainer() {\n   const watchedFilms = await getWatchedFilms();\n   mainLib.insertAdjacentHTML('beforeend', generateLibraryContentList(watchedFilms));\n}\n\nasync function renderQueueFilmsContainer() {\n   const queueFilms = await getQueueFilms();\n   mainLib.insertAdjacentHTML('beforeend', generateLibraryContentList(queueFilms));\n}\n\nfunction createLibraryMarkUp(acc, cardFilm) {\n  const genreNames = cardFilm.genres.map(a => a.name);\n  return (\n    acc +\n    `<div class=\"movie\" data-id=\"${cardFilm.id}\">\n    <div class=\"wrapper-img\">\n    ${\n      cardFilm.poster_path\n        ? `<img src='${IMG_URL + cardFilm.poster_path}' alt='${\n            cardFilm.title\n          }' data-id=\"${cardFilm.id}\" >`\n        : `<img src=\"${require('/src/images/default-poster-webp.webp')}\" alt=\"${\n            cardFilm.title\n          }\" data-id=\"${cardFilm.id}\">`\n    }\n    </div>\n        <div class=\"movie-info\">\n          <h3 class=\"title__info\">${cardFilm.title}</h3>\n            <div class=\"overview\">\n            ${\n              genreNames.slice(0, 2).join(', ')\n                ? `<p class=\"info__genres-and-year\">${genreNames\n                    .slice(0, 2)\n                    .join(', ')} ${\n                    genreNames.length > 2 ? ', Other' : ' '\n                  } | ${cardFilm.release_date.slice(0, 4)} </p>`\n                : `<p class=\"info__genres-and-year\"> N/A | ${cardFilm.release_date.slice(\n                    0,\n                    4\n                  )} </p>`\n            }\n            <span class=\"vote_average\">${cardFilm.vote_average}</span> \n            </div>\n        </div>\n        </div>`\n  );\n}\n\nconst refs = {\n   watchedBtn: document.querySelector('.watched-btn'),\n   queueBtn: document.querySelector('.queue-btn')\n}\n\n\nrefs.watchedBtn.addEventListener('click', onWatchedBtn);\nrefs.queueBtn.addEventListener('click', onQueueBtn);\n\nfunction onWatchedBtn() {\n   if (!refs.watchedBtn.classList.contains('button-active')) {\n      refs.watchedBtn.classList.add('button-active');\n      refs.queueBtn.classList.remove('button-active');\n   }\n   return;\n}\n\nfunction onQueueBtn() {\n   if (!refs.queueBtn.classList.contains('button-active')) {\n      refs.queueBtn.classList.add('button-active');\n      refs.watchedBtn.classList.remove('button-active');\n   }\n   return;\n}\n\n"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","module","exports","URL","parcelRequire","resolve","import","meta","url","toString","register","JSON","parse","$2shzp","$1cafa503bc57b7a0$var$watchedBtn","document","querySelector","$1cafa503bc57b7a0$var$queueBtn","$1cafa503bc57b7a0$var$mainLib","async","$1cafa503bc57b7a0$var$fetchStorageFilm","$parcel$interopDefault","get","data","$1cafa503bc57b7a0$var$generateLibraryContentList","array","reduce","$1cafa503bc57b7a0$var$createLibraryMarkUp","acc","cardFilm","genreNames","genres","map","a","name","poster_path","title","slice","join","release_date","vote_average","addEventListener","innerHTML","watchedFilms","getWatchedId","localStorage","getItem","parsedWatchedFilms","savedFilms","film","push","$1cafa503bc57b7a0$var$getWatchedFilms","insertAdjacentHTML","$1cafa503bc57b7a0$var$renderWatchedFilmsContainer","queueFilms","getQueuedId","parsedQueueFilms","$1cafa503bc57b7a0$var$getQueueFilms","$1cafa503bc57b7a0$var$renderQueueFilmsContainer","$1cafa503bc57b7a0$var$refs","watchedBtn","queueBtn","classList","contains","add","remove"],"version":3,"file":"library.3f01cbd7.js.map"}