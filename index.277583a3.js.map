{"mappings":"sgBAAAA,EAAAC,QAAiB,IAAAC,IAAoBC,EAAA,SAAAC,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,U,ICA5FL,EAAA,SAAAM,SAA8CC,KAAKC,MAAM,gHCAzD,MAEMC,EAAUC,+GAGVC,EAAS,CACb,CAAEC,GAAI,GAAIC,KAAM,UAChB,CAAED,GAAI,GAAIC,KAAM,aAChB,CAAED,GAAI,GAAIC,KAAM,aAChB,CAAED,GAAI,GAAIC,KAAM,UAChB,CAAED,GAAI,GAAIC,KAAM,SAChB,CAAED,GAAI,GAAIC,KAAM,eAChB,CAAED,GAAI,GAAIC,KAAM,SAChB,CAAED,GAAI,MAAOC,KAAM,UACnB,CAAED,GAAI,GAAIC,KAAM,WAChB,CAAED,GAAI,GAAIC,KAAM,WAChB,CAAED,GAAI,GAAIC,KAAM,UAChB,CAAED,GAAI,MAAOC,KAAM,SACnB,CAAED,GAAI,KAAMC,KAAM,WAClB,CAAED,GAAI,MAAOC,KAAM,WACnB,CAAED,GAAI,IAAKC,KAAM,mBACjB,CAAED,GAAI,MAAOC,KAAM,YACnB,CAAED,GAAI,GAAIC,KAAM,YAChB,CAAED,GAAI,MAAOC,KAAM,OACnB,CAAED,GAAI,GAAIC,KAAM,YAGZC,EAAOC,SAASC,eAAe,QAK/BC,GAJOF,SAASC,eAAe,SACtBD,SAASC,eAAe,WAG1BD,SAASG,cAAc,UAC9BC,EAAUJ,SAASG,cAAc,YACjCE,EAAOL,SAASG,cAAc,SAEpC,IAAIG,EAAc,EACdC,EAAW,EACXC,EAAW,EACXC,EAAU,GACVC,EAAa,IAIV,SAASC,EAAUtB,GACxBoB,EAAUpB,EACVuB,MAAMvB,GACHwB,MAAKC,GAAOA,EAAIC,SAChBF,MAAKG,KA6BV,SAAoBA,GAClBjB,EAAKkB,UAAY,GACjBD,EAAKE,SAAQC,IACX,MAAMC,MACJA,EAAKC,YACLA,EAAWC,aACXA,EAAYC,SACZA,EAAQC,UACRA,EAASC,QACTA,EAAOC,aACPA,EAAYC,WACZA,EAAUC,eACVA,EAAc/B,GACdA,GACEsB,EACEU,EAAU7B,SAAS8B,cAAc,OACvCD,EAAQE,UAAUC,IAAI,SACtBH,EAAQI,aAAa,UAAW,GAAGpC,KAMnC,MAAMqC,EAJgBtC,EAAOuC,QAAO,SAAUC,GAC5C,OAAmC,IAA5BZ,EAAUa,QAAQD,EAAEvC,G,IAGMyC,KAAIC,GAAKA,EAAEzC,OAE9C+B,EAAQZ,UAAY,wCAGlBI,EACI,aAvGM,kCAuGiBA,WAAqBD,eAAmBvB,MAC/D,aAAaZ,EAAA,kBAAyDmC,eAAmBvB,0FAI/DuB,2DAGtBc,EAAWM,MAAM,EAAG,GAAGC,KAAK,MACxB,oCAAoCP,EACjCM,MAAM,EAAG,GACTC,KAAK,SAASP,EAAWQ,OAAS,EAAI,IAAM,6BAChDpB,EAAakB,MAAM,EAAG,UACrB,yDACDlB,EAAakB,MAAM,EAAG,sDAKnCzC,EAAK4C,YAAYd,EAAQ,G,CA5EvBe,CAAW5B,EAAK6B,SAEhBvC,EAAcU,EAAK8B,KACnBC,QAAQC,IAAI1C,GACZC,EAAWS,EAAK8B,KAAO,EACvBtC,EAAWQ,EAAK8B,KAAO,EACvBpC,EAAaM,EAAKiC,YAElB7C,EAAQ8C,UAAY5C,EAEhBA,GAAe,GACjBJ,EAAK6B,UAAUC,IAAI,YACnB3B,EAAK0B,UAAUoB,OAAO,aACb7C,GAAeI,GACxBR,EAAK6B,UAAUoB,OAAO,YACtB9C,EAAK0B,UAAUC,IAAI,cAEnB9B,EAAK6B,UAAUoB,OAAO,YACtB9C,EAAK0B,UAAUoB,OAAO,aAGI,IAAxBnC,EAAK6B,QAAQH,SACfK,QAAQC,IAAI,mBACZrC,EAAUjB,G,IAsElB,SAAS0D,EAASN,GAChB/C,EAAKsD,eAAe,CAAEC,SAAU,WAChC,IAAIC,EAAW9C,EAAQ+C,MAAM,KACzBC,EAAcF,EAAS,GAAGC,MAAM,KAChCE,EAAMD,EAAYA,EAAYf,OAAS,GAAGc,MAAM,KACpD,GAAe,SAAXE,EAAI,GAAe,CAErB/C,EADUF,EAAU,SAAWqC,E,KAE1B,CACLY,EAAI,GAAKZ,EAAKxD,WACd,IAAIiD,EAAImB,EAAIjB,KAAK,KACjBgB,EAAYA,EAAYf,OAAS,GAAKH,EACtC,IAAIoB,EAAIF,EAAYhB,KAAK,KAEzB9B,EADU4C,EAAS,GAAK,IAAMI,E,EAjHlChD,EAAUjB,GAuFVW,EAAKuD,iBAAiB,SAAS,KACzBrD,EAAW,GACb6C,EAAS7C,EAAS,IAItBL,EAAK0D,iBAAiB,SAAS,KAC7Bb,QAAQC,IAAI1C,GACRE,GAAYE,GAAcJ,EAAc,EAAI,GAC9C8C,EAAS5C,EAAS","sources":["node_modules/@parcel/runtime-js/lib/runtime-32d546c8b06f5caf.js","node_modules/@parcel/runtime-js/lib/runtime-0040db8c4d7c8af5.js","src/js/serviceApi.js"],"sourcesContent":["module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"2G1uI\")).toString();","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"b5LSx\\\":\\\"index.277583a3.js\\\",\\\"2G1uI\\\":\\\"default-poster-webp.86f2548c.webp\\\"}\"));","const API_KEY = 'api_key=d7be37f171d8123214539749ff0838e8';\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst API_URL = BASE_URL + '/discover/movie?sort_by=popularity.desc&' + API_KEY;\nconst IMG_URL = 'https://image.tmdb.org/t/p/w500';\nconst searchURL = BASE_URL + '/search/movie?' + API_KEY;\nconst genres = [\n  { id: 28, name: 'Action' },\n  { id: 12, name: 'Adventure' },\n  { id: 16, name: 'Animation' },\n  { id: 35, name: 'Comedy' },\n  { id: 80, name: 'Crime' },\n  { id: 99, name: 'Documentary' },\n  { id: 18, name: 'Drama' },\n  { id: 10751, name: 'Family' },\n  { id: 14, name: 'Fantasy' },\n  { id: 36, name: 'History' },\n  { id: 27, name: 'Horror' },\n  { id: 10402, name: 'Music' },\n  { id: 9648, name: 'Mystery' },\n  { id: 10749, name: 'Romance' },\n  { id: 878, name: 'Science Fiction' },\n  { id: 10770, name: 'TV Movie' },\n  { id: 53, name: 'Thriller' },\n  { id: 10752, name: 'War' },\n  { id: 37, name: 'Western' },\n];\n\nconst main = document.getElementById('main');\nconst form = document.getElementById('.form');\nconst search = document.getElementById('.search');\n\n// El pagination\nconst prev = document.querySelector('#prev');\nconst current = document.querySelector('#current');\nconst next = document.querySelector('#next');\n\nlet currentPage = 1;\nlet nextPage = 2;\nlet prevPage = 3;\nlet lastUrl = '';\nlet totalPages = 100;\n\ngetMovies(API_URL);\n\nexport function getMovies(url) {\n  lastUrl = url;\n  fetch(url)\n    .then(res => res.json())\n    .then(data => {\n      showMovies(data.results);\n\n      currentPage = data.page;\n      console.log(currentPage);\n      nextPage = data.page + 1;\n      prevPage = data.page - 1;\n      totalPages = data.total_pages;\n\n      current.innerText = currentPage;\n\n      if (currentPage <= 1) {\n        prev.classList.add('disabled');\n        next.classList.remove('disabled');\n      } else if (currentPage >= totalPages) {\n        prev.classList.remove('disabled');\n        next.classList.add('disabled');\n      } else {\n        prev.classList.remove('disabled');\n        next.classList.remove('disabled');\n      }\n\n      if (data.results.length === 0) {\n        console.log('ERROR IN SEARCH');\n        getMovies(API_URL);\n      }\n    });\n}\n\nfunction showMovies(data) {\n  main.innerHTML = '';\n  data.forEach(movie => {\n    const {\n      title,\n      poster_path,\n      release_date,\n      overview,\n      genre_ids,\n      popular,\n      vote_average,\n      vote_count,\n      original_title,\n      id,\n    } = movie;\n    const movieEl = document.createElement('div');\n    movieEl.classList.add('movie');\n    movieEl.setAttribute('data-id', `${id}`);\n\n    let genreArrayOfObj = genres.filter(function (g) {\n      return genre_ids.indexOf(g.id) !== -1;\n    });\n\n    const genreNames = genreArrayOfObj.map(a => a.name);\n\n    movieEl.innerHTML = `\n    <div class=\"wrapper-img\">\n    ${\n      poster_path\n        ? `<img src='${IMG_URL + poster_path}' alt='${title}' data-id=\"${id}\">`\n        : `<img src=\"${require('/src/images/default-poster-webp.webp')}\" alt=\"${title}\" data-id=\"${id}\">`\n    }\n    </div>\n        <div class=\"movie-info\">\n          <h3 class=\"title__info\">${title}</h3>\n            <div class=\"overview\">\n            ${\n              genreNames.slice(0, 2).join(', ')\n                ? `<p class=\"info__genres-and-year\">${genreNames\n                    .slice(0, 2)\n                    .join(', ')} ${genreNames.length > 2 ? ' ' : ', Other'}\n             | ${release_date.slice(0, 4)} </p>`\n                : `<p class=\"info__genres-and-year\"> N/A\n             | ${release_date.slice(0, 4)} </p>`\n            }\n            </div>\n        </div>\n    `;\n    main.appendChild(movieEl);\n  });\n}\n// Pagination\nnext.addEventListener('click', () => {\n  if (nextPage > 0) {\n    pageCall(nextPage);\n  }\n});\n\nprev.addEventListener('click', () => {\n  console.log(currentPage);\n  if (prevPage <= totalPages && currentPage - 1 > 0) {\n    pageCall(prevPage);\n  }\n});\n\nfunction pageCall(page) {\n  main.scrollIntoView({ behavior: 'smooth' });\n  let urlSplit = lastUrl.split('?');\n  let queryParams = urlSplit[1].split('?');\n  let key = queryParams[queryParams.length - 1].split('=');\n  if (key[0] !== 'page') {\n    let url = lastUrl + '&page=' + page;\n    getMovies(url);\n  } else {\n    key[1] = page.toString();\n    let a = key.join('=');\n    queryParams[queryParams.length - 1] = a;\n    let b = queryParams.join('&');\n    let url = urlSplit[0] + '?' + b;\n    getMovies(url);\n  }\n}\n"],"names":["module","exports","URL","parcelRequire","resolve","import","meta","url","toString","register","JSON","parse","$284754a050692e06$var$API_URL","$284754a050692e06$var$BASE_URL","$284754a050692e06$var$genres","id","name","$284754a050692e06$var$main","document","getElementById","$284754a050692e06$var$prev","querySelector","$284754a050692e06$var$current","$284754a050692e06$var$next","$284754a050692e06$var$currentPage","$284754a050692e06$var$nextPage","$284754a050692e06$var$prevPage","$284754a050692e06$var$lastUrl","$284754a050692e06$var$totalPages","$284754a050692e06$export$60e1c8f5f122c5ac","fetch","then","res","json","data","innerHTML","forEach","movie","title","poster_path","release_date","overview","genre_ids","popular","vote_average","vote_count","original_title","movieEl","createElement","classList","add","setAttribute","genreNames","filter","g","indexOf","map","a","slice","join","length","appendChild","$284754a050692e06$var$showMovies","results","page","console","log","total_pages","innerText","remove","$284754a050692e06$var$pageCall","scrollIntoView","behavior","urlSplit","split","queryParams","key","b","addEventListener"],"version":3,"file":"index.277583a3.js.map"}